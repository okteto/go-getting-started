build:
  hello-world:
    context: .
    dockerfile: Dockerfile

deploy:
  - kubectl apply -f k8s.yml
  - kubectl set image deployment/hello-world hello-world=${OKTETO_BUILD_HELLO_WORLD_IMAGE}
  - kubectl rollout status deployment/hello-world

dev:
  hello-world:
    image: okteto/golang:1
    command: bash
    sync:
      - .:/usr/src/app
    volumes:
      - /go
      - /root/.cache
  
test:
  hello-world:
    image: golang:1.23
    commands:
      - go test -v